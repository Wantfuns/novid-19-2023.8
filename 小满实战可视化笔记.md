# å¯è§†åŒ–å®æˆ˜

# 1-ä»‹ç»

# 2-æ¥å£API

### é…ç½®

```
npm install ts-node -g   
npm init -y  
npm install @types/node -D  
 npm install express -S   
npm install @types/express -D
 npm i axios -S
```

> node.jsä¸­expressçš„Routerè·¯ç”±çš„ä½¿ç”¨
> expressä¸­çš„Routerä½œç”¨å°±æ˜¯
> ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„æ ¹æ®è·¯ç”±å»åˆ†æ¨¡å—ã€‚é¿å…å°†æ‰€æœ‰è·¯ç”±éƒ½å†™åœ¨å…¥å£æ–‡ä»¶ä¸­ã€‚

é¢è¯•å¸¸é—®ï¼šnodeç«¯çš„axioså’Œæµè§ˆå™¨ç«¯æœ‰ä»€ä¹ˆä¸åŒ

axiosæŠŠAjaxç»™é›†æˆäº†ï¼Œåœ¨nodeç«¯åˆæŠŠhttpç»™å°è£…äº†

### index.ts

```js
import express, { Express, Router, Request, Response } from "express";

import axios from "axios";

const app: Express = express();

const router: Router = express.Router();

app.use("/api", router);

router.get("/list", async (req: Request, res: Response) => {
  const result = await axios.post(
    "https://api.inews.qq.com/newsqa/v1/query/inner/publish/modules/list?modules=localCityNCOVDataList,diseaseh5Shelf"
  );
  res.json({
    data: result.data,
  });
});

//èµ·ä¸€ä¸ªæœåŠ¡
app.listen(3333, () => {
  console.log("sucess server http://localhost:3333");
});

```

#### ä»£æ›¿æ–¹æ¡ˆ

> è…¾è®¯çš„æ¥å£è¿æ¥å·²ç»å…³é—­æ‰€ä»¥ï¼Œè‡ªå·±èµ·äº†ä¸€ä¸ªæœ¬åœ°jsonæ–‡ä»¶æ¥å£--ä¸å¦‚ç›´æ¥å¼•ç”¨æ•°æ®ğŸ˜‚

```js
import express, { Express, Router, Request, Response } from "express";

import axios from "axios";

const fs=require('fs')

const app: Express = express();

const router: Router = express.Router();

app.use("/api", router);

//æœ¬åœ°jsonæ–‡ä»¶ä»£æ›¿è…¾è®¯çš„æ¥å£jsonæ•°æ®
const data = fs.readFileSync(`${__dirname}/COVID-19.json`, "utf-8");

router.get("/list", async (req: Request, res: Response) => {
 res.end(data)
});

//èµ·ä¸€ä¸ªæœåŠ¡
app.listen(3333, () => {
  console.log("sucess server http://localhost:3333");
});

```



# 3-å‰ç«¯åˆå§‹åŒ–

## é…ç½®

```js
 npminit vue@latest
```

## å›¾ç‰‡å¼•å…¥

> å›¾ç‰‡åœ¨tsé‡Œç¼–è¯‘åä¼šæ— æ³•å¼•ç”¨ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥å¼•å…¥ï¼Œä½¿ç”¨importæ¥å¼•å…¥

```vue
import bg from "./assets/1.jpg";
  <div
    :style="{ background: ` url(${bg}) `, backgroundSize: `100% 100%` }"
    class="box"
  >
```

### ä½¿ç”¨BFC

```
 è®¾ç½®overflow: hidden;
```

# 4-Map

## echartså¼•å…¥

```js
å› ä¸ºæˆ‘ç°åœ¨çš„ç‰ˆæœ¬æ˜¯5ç‰ˆæœ¬ï¼Œæ‰€ä»¥4çš„å¼•å…¥æ–¹å¼ä¼šå¯¼è‡´æŠ¥é”™éœ€è¦æ”¹ä¸ºï¼š
import * as echarts from "echarts"; //echarts 5

åŒæ—¶å¼•å…¥çš„china.jså› ä¸ºä¸æ˜¯5ç‰ˆæœ¬çš„æ ¼å¼ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦gai'yi
```

### ERROR

> noMountedå‡½æ•°çš„æ‹¬å·åˆ æ‰å¯¼è‡´ å„ç§é”™è¯¯.......

> åœ°å›¾æ˜¾ç¤ºä¸å…¨ï¼Œå› ä¸ºå·¦å³çš„boxçš„widthè®¾ç½®äº†400pxï¼Œå¯¼è‡´åœ°å›¾æ— æ³•æ˜¾ç¤ºå…¨éƒ¨ï¼Œæ”¹ä¸º200pxå°±å¥½äº†ã€‚ä½†æ˜¯åé¢éœ€è¦åªåšè¡¨æ ¼æ—¶ä¼šä¸å¤Ÿç©ºé—´ï¼Œæ‰€ä»¥æœ€å¥½æ—¶ä¿®æ”¹chartsçš„layoutSizeæ”¹ä¸º100%ï¼ˆæ‰€æœ‰ï¼‰ï¼Œæ ‡å¿—æœ€å¥½ä¹Ÿæ”¹å°äº†

![](å°æ»¡å®æˆ˜å¯è§†åŒ–.assets/Snipaste_2023-08-29_11-23-28.jpg)

ç‰ˆæœ¬è½¬æ¢è¦æ”¹çš„æ ¼å¼

> emphasis å’Œ itemstyle å¹³çº§
>
> normal ä¸éœ€è¦äº†.......

```js
  charts.setOption({
    geo: {
      map: "china",
      aspectScale: 0.8,
      layoutCenter: ["50%", "50%"],
      layoutSize: "120%",
      itemStyle: {
        // normal: {
        areaColor: {
          type: "linear-gradient",
          x: 0,
          y: 1200,
          x2: 1000,
          y2: 0,
          colorStops: [
            {
              offset: 0,
              color: "#152E6E", // 0% å¤„çš„é¢œè‰²
            },
            {
              offset: 1,
              color: "#0673AD", // 50% å¤„çš„é¢œè‰²
            },
          ],
          global: true, // ç¼ºçœä¸º false
        },
        shadowColor: "#0f5d9d",
        shadowOffsetX: 0,
        shadowOffsetY: 15,
        opacity: 0.5,
        // },
      },
      emphasis: {
        areaColor: "#0f5d9d",
      },
      regions: [
        {
          name: "å—æµ·è¯¸å²›",
          itemStyle: {
            areaColor: "rgba(0, 10, 52, 1)",
            borderColor: "rgba(0, 10, 52, 1)",
            // normal: {
            opacity: 0,
            label: {
              show: false,
              color: "#009cc9",
            },
            // },
          },
          label: {
            show: false,
            color: "#FFFFFF",
            fontSize: 12,
          },
        },
      ],
    },
    series: [
      {
        type: "map",
        selectedMode: "multiple",
        map: "china",
        aspectScale: 0.8,
        layoutCenter: ["50%", "50%"], //åœ°å›¾ä½ç½®
        layoutSize: "120%",
        zoom: 1, //å½“å‰è§†è§’çš„ç¼©æ”¾æ¯”ä¾‹
        // roam: true, //æ˜¯å¦å¼€å¯å¹³æ¸¸æˆ–ç¼©æ”¾
        scaleLimit: {
          //æ»šè½®ç¼©æ”¾çš„æé™æ§åˆ¶
          min: 1,
          max: 2,
        },
        label: {
          show: true,
          color: "#FFFFFF",
          fontSize: 1,
        },
        itemStyle: {
          // normal: {
          areaColor: "#0c3653",
          borderColor: "#1cccff",
          borderWidth: 1.8,
          // },
        },
        emphasis: {
          areaColor: "#56b1da",
          label: {
            show: false,
            color: "#fff",
          },
        },
        data: data,
      },
      {
        name: "Top 5",
        type: "scatter",
        coordinateSystem: "geo",
        //   symbol: 'image://http://ssq168.shupf.cn/data/biaoji.png',
        // symbolSize: [30,120],
        // symbolOffset:[0, '-40%'] ,
        label: {
          // normal: {
          show: false,
          // },
        },
        itemStyle: {
          // normal: {
          color: "#D8BC37", //æ ‡å¿—é¢œè‰²
          // },
        },
        data: data,
      },
    ],
  });
```

## æ•°æ®

### ç±»å‹

> json2.tsæ’ä»¶æ¥å¿«é€Ÿå®Œå–„ç±»å‹çš„æŠ¥é”™

### ç»çº¬åº¦

```ts
export const geoCoordMap: Record<string, Array<number>> = {
  'å°æ¹¾': [121, 23],
  'é»‘é¾™æ±Ÿ': [127, 48],
  'å†…è’™å¤': [110.3467, 41.4899],
  "å‰æ—": [125.8154, 44.2584],
  'åŒ—äº¬': [116.4551, 40.2539],
  "è¾½å®": [123.1238, 42.1216],
  "æ²³åŒ—": [114.4995, 38.1006],
  "å¤©æ´¥": [117.4219, 39.4189],
  "å±±è¥¿": [112.3352, 37.9413],
  "é™•è¥¿": [109.1162, 34.2004],
  "ç”˜è‚ƒ": [103.5901, 36.3043],
  "å®å¤": [106.3586, 38.1775],
  "é’æµ·": [99.4038, 36.8207],
  "æ–°ç–†": [87.9236, 43.5883],
  "è¥¿è—": [88.388277, 31.56375],
  "å››å·": [103.9526, 30.7617],
  "é‡åº†": [108.384366, 30.439702],
  "å±±ä¸œ": [117.1582, 36.8701],
  "æ²³å—": [113.4668, 34.6234],
  "æ±Ÿè‹": [118.8062, 31.9208],
  "å®‰å¾½": [117.29, 32.0581],
  "æ¹–åŒ—": [114.3896, 30.6628],
  "æµ™æ±Ÿ": [119.5313, 29.8773],
  "ç¦å»º": [119.4543, 25.9222],
  "æ±Ÿè¥¿": [116.0046, 28.6633],
  "æ¹–å—": [113.0823, 28.2568],
  "è´µå·": [106.6992, 26.7682],
  "äº‘å—": [102.9199, 25.4663],
  "å¹¿ä¸œ": [113.12244, 23.009505],
  "å¹¿è¥¿": [108.479, 23.1152],
  "æµ·å—": [110.3893, 19.8516],
  'ä¸Šæµ·': [121.4648, 31.2891],
  'é¦™æ¸¯': [114.30, 22.9],
  'æ¾³é—¨': [113.5, 22.2]
};
```

#### éå†ç»çº¬åº¦

> é‡åˆ°åŸå¸‚åå­—æ— æ³•æ˜¾ç¤ºï¼Œæ˜¯å› ä¸ºseriesçš„fontsizeè®¾ç½®ä¸º1ï¼Œå¤ªå°çœ‹ä¸è§ğŸ¤£
>
> æ ‡å¿—çš„æ•°å­—æ˜¾ç¤ºéœ€è¦å–scatterçš„labelçš„showæ‰“å¼€è®¾ç½®ä¸ºtrue

```js
  const data = city.map((v) => {
    // confirmæ¥æ‹¼æ¥
    console.log(v.name, geoCoordMap[v.name].concat(v.total.confirm));

    return {
      name: v.name,
      value: geoCoordMap[v.name].concat(v.total.confirm),
    };
  });

```

#### formatteræ¥ä¿®æ”¹æ ‡å¿—æ•°å€¼

> å› ä¸ºæ ‡å¿—ç°åœ¨æ˜¾ç¤ºçš„æ˜¯ç»çº¬åº¦ï¼Œæ‰€ä»¥éœ€è¦formatterå›è°ƒæ¥çœ‹çœ‹valueï¼Œåœ¨returnè¿”å›æˆ‘ä¹ˆéœ€è¦çš„æ•°æ®

```js
       type: "scatter",
        coordinateSystem: "geo",
        symbol: "pin",
        symbolSize: [45, 45],
        label: {
          show: true,
          color: "#fff",
          formatter(value: any) {
            // console.log(value);
            return value.data.value[2];
          },
        },
```

# 7-è¡¨æ ¼æ•°æ®

## selectedModeé€‰ä¸­æ¨¡å¼

> single multiple series ä¸‰ç§æ¨¡å¼--çœ‹æ–‡æ¡£

## ç®€åŒ–ä¸šåŠ¡é€»è¾‘

> ç”¨inchartsæ¥åŒ…å«echartåœ°å›¾ï¼Œä»£ç æ›´æœ‰é˜…è¯»æ€§

## å­˜å‚¨æ•°æ®

> ç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶å‚¨å­˜childrenï¼Œåœ¨storesé‡Œé¢è®¾ç½®itemæ¥å­˜æ”¾

```js
	  state: () => ({
    list: <RootObject>{},
    item: <Children[]>[],
  }),
```

## åˆ¶ä½œè¡¨æ ¼

> æ·»åŠ animateåŠ¨ç”»ï¼Œä½¿ç”¨animate.cssï¼Œéœ€è¦ä¸€ä¸ªï¼škeyå€¼æ¥å“åº”ï¼Œæœ€å¥½æ—¶å”¯ä¸€çš„ï¼Œitem.nameå’Œindexéƒ½ä¸æ˜¯å”¯ä¸€ä¼šå‡ºç°ä¸ä¼šè¿‡æ¸¡çš„é—®é¢˜--**diffç®—æ³•**ä¼šå¯¼è‡´ä¸€äº›è¿‡æ¸¡é—®é¢˜
>
> ä½¿ç”¨animateéœ€è¦æ·»åŠ å‰ç¼€ï¼ˆæ–°çš„ç‰ˆæœ¬å˜æ›´

```js
        <transition-group
          enter-active-class="animate__animated animate__flipInY"
          tag="tbody"
        >
          <tr :key="index" v-for="(item, index) in store.item">
            <td align="center">{{ item.name }}</td>
            <td align="center">{{ item.today.confirm }}</td>
            <td align="center">{{ item.total.confirm }}</td>
            <td align="center">{{ item.total.heal }}</td>
            <td align="center">{{ item.total.dead }}</td>
          </tr>
        </transition-group>
```

### é»˜è®¤æ˜¾ç¤º

```js
const initCharts = () => {
  const city = store.list.diseaseh5Shelf.areaTree[0].children;
  // é»˜è®¤æ˜¾ç¤ºçš„item
  store.item = city[1].children;
```



# 8-çœ‹æ¿æ•°æ®

## html

```vue
    <div style="color: white" class="box-left">
      <div class="box-left-card">
        <section>
          <div>è¾ƒä¸Šæ—¥+ {{ store.chinaAdd.nowConfirm }}</div>
          <div>{{ store.chinaTotal.confirm }}</div>
          <div>æœ¬åœŸç°æœ‰ç¡®è¯Š</div>
        </section>
```

## scss

```scss
 &-left {
    width: 400px;
    &-card {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      section {
        background: $itemBg;
        border: 1px solid $itemBorder;
        padding: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        div:nth-child(2) {
          color: $itemColor;
          padding: 10px 0;
          font-size: 20px;
          font-weight: bold;
        }
      }
    }
  }
```

# 9\10 -å…¶ä»–å›¾

> ä¸»è¦é”»ç‚¼çœ‹echartsçš„æ–‡æ¡£ï¼Œæœç´¢å’Œæ–¹æ³•çš„è°ƒç”¨ä»¥åŠæ ¼å¼

>    ç®­å¤´å‡½æ•°çš„è¾“å‡ºæ·»åŠ äº†ä¸€ä¸ª{}é€ æˆå¯¼å‡ºçš„æ•°æ®ç±»å‹ä¸å¯¹--ä¸€ç›´å¾˜å¾Š

# ä¿®å¤itemæ²¡æœ‰å”¯ä¸€å€¼

> å¯¼è‡´éƒ¨åˆ†æ•°æ®æ²¡æœ‰è¿‡æ¸¡æ•ˆæœï¼Œåœ¨npmæ‰¾åˆ°ä¸€ä¸ªæ·»åŠ idçš„åŒ…--jsoncereal
>
> éœ€è¦ åœ¨å£°æ˜æ–‡ä»¶é‡Œå£°æ˜è¿™ä¸ªåŒ…ï¼Œå¦åˆ™æŠ¥é”™ declare module "jsoncereal";

```apl
npm i jsoncereal
```

```vue
import jcereal from "jsoncereal"; //makeId()æ¥ç»™itemæ·»åŠ _idå®ç°è¿‡æ¸¡åŠ¨ç”»
<tr :key="item._id" v-for="item in jcereal.makeId(store.item)">
```



# Finally-ä¸Šä¼ GitHubä»“åº“

```
git clone  #ä»“åº“lian'jie
#å…‹éš†ä»“åº“åˆ°æœ¬åœ°æ–‡ä»¶å¤¹
```

```
cd Python-practice/    #è½¬åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸­

git init              #å¯¹gitè¿›è¡Œåˆå§‹åŒ–

git add .              #å°†è¯¥æ–‡ä»¶å¤¹é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°ç¼“å­˜åŒº

git commit -m "armed ship"    #å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°ä»“åº“ä¸­ï¼Œ "armed ship" â€”â€”æ˜¯ä½ è‡ªå·±éœ€è¦æäº¤çš„å¤‡æ³¨ä¿¡æ¯

git push      #å°†æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹çš„githubä»“åº“ä¸­ï¼Œè¿™æ ·å°±å®Œæˆä¸Šä¼ å•¦
```

